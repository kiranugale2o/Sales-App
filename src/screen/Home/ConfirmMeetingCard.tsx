import {useNavigation, useRoute} from '@react-navigation/native';
import React, {useState} from 'react';
import {View, Text, StyleSheet, TouchableOpacity, Image} from 'react-native';
import Svg, {Path} from 'react-native-svg';
import {RootStackParamList} from '../../types';
import {NativeStackNavigationProp} from '@react-navigation/native-stack';

const ConfirmMeetingCard: React.FC = () => {
  type NavigationProp = NativeStackNavigationProp<
    RootStackParamList,
    'FindTerritory'
  >;
  const navigation = useNavigation<NavigationProp>();

  const route = useRoute();
  const {selectedIndex} = route.params as {selectedIndex: number};

  console.log('Selected Partner Index:', selectedIndex);
  return (
    <View
      style={{
        width: '100%',
        flex: 1,
        backgroundColor: 'white',
      }}>
      <View style={[styles.cardContainer]}>
        {/* Header */}
        <View style={styles.header}>
          <View style={styles.iconCircle}>
            <Svg width="25" height="24" viewBox="0 0 25 24" fill="none">
              <Path
                d="M12.5 0C15.6826 0 18.7348 1.26428 20.9853 3.51472C23.2357 5.76515 24.5 8.8174 24.5 12C24.5 15.1826 23.2357 18.2348 20.9853 20.4853C18.7348 22.7357 15.6826 24 12.5 24C9.3174 24 6.26515 22.7357 4.01472 20.4853C1.76428 18.2348 0.5 15.1826 0.5 12C0.5 8.8174 1.76428 5.76515 4.01472 3.51472C6.26515 1.26428 9.3174 0 12.5 0ZM11.0051 14.3674L8.33943 11.7C8.24386 11.6044 8.13041 11.5286 8.00555 11.4769C7.88069 11.4252 7.74686 11.3986 7.61171 11.3986C7.47657 11.3986 7.34274 11.4252 7.21788 11.4769C7.09302 11.5286 6.97956 11.6044 6.884 11.7C6.691 11.893 6.58257 12.1548 6.58257 12.4277C6.58257 12.7007 6.691 12.9624 6.884 13.1554L10.2783 16.5497C10.3736 16.6458 10.4869 16.722 10.6118 16.774C10.7367 16.826 10.8707 16.8528 11.006 16.8528C11.1413 16.8528 11.2753 16.826 11.4002 16.774C11.5251 16.722 11.6384 16.6458 11.7337 16.5497L18.7623 9.51943C18.8591 9.42426 18.9362 9.31086 18.989 9.18577C19.0418 9.06068 19.0693 8.92637 19.0699 8.79059C19.0705 8.65482 19.0443 8.52026 18.9926 8.39468C18.941 8.26911 18.865 8.15499 18.7691 8.05893C18.6731 7.96286 18.5591 7.88675 18.4336 7.83497C18.3081 7.78319 18.1735 7.75677 18.0378 7.75725C17.902 7.75772 17.7677 7.78507 17.6425 7.83771C17.5173 7.89036 17.4039 7.96727 17.3086 8.064L11.0051 14.3674Z"
                fill="#21BE79"
              />
            </Svg>
          </View>
          <Text style={styles.headerText}>Confirm Your Meeting</Text>
        </View>

        {/* Info Block */}
        <View style={styles.infoBlock}>
          <InfoRow
            icon={() => {
              return (
                <Svg width="25" height="24" viewBox="0 0 25 24" fill="none">
                  <Path
                    d="M1.5 20V17.2C1.5 16.6333 1.64583 16.1125 1.9375 15.6375C2.22917 15.1625 2.61667 14.8 3.1 14.55C4.13333 14.0333 5.18333 13.6458 6.25 13.3875C7.31667 13.1292 8.4 13 9.5 13C10.6 13 11.6833 13.1292 12.75 13.3875C13.8167 13.6458 14.8667 14.0333 15.9 14.55C16.3833 14.8 16.7708 15.1625 17.0625 15.6375C17.3542 16.1125 17.5 16.6333 17.5 17.2V20H1.5ZM19.5 20V17C19.5 16.2667 19.2958 15.5625 18.8875 14.8875C18.4792 14.2125 17.9 13.6333 17.15 13.15C18 13.25 18.8 13.4208 19.55 13.6625C20.3 13.9042 21 14.2 21.65 14.55C22.25 14.8833 22.7083 15.2542 23.025 15.6625C23.3417 16.0708 23.5 16.5167 23.5 17V20H19.5ZM9.5 12C8.4 12 7.45833 11.6083 6.675 10.825C5.89167 10.0417 5.5 9.1 5.5 8C5.5 6.9 5.89167 5.95833 6.675 5.175C7.45833 4.39167 8.4 4 9.5 4C10.6 4 11.5417 4.39167 12.325 5.175C13.1083 5.95833 13.5 6.9 13.5 8C13.5 9.1 13.1083 10.0417 12.325 10.825C11.5417 11.6083 10.6 12 9.5 12ZM19.5 8C19.5 9.1 19.1083 10.0417 18.325 10.825C17.5417 11.6083 16.6 12 15.5 12C15.3167 12 15.0833 11.9792 14.8 11.9375C14.5167 11.8958 14.2833 11.85 14.1 11.8C14.55 11.2667 14.8958 10.675 15.1375 10.025C15.3792 9.375 15.5 8.7 15.5 8C15.5 7.3 15.3792 6.625 15.1375 5.975C14.8958 5.325 14.55 4.73333 14.1 4.2C14.3333 4.11667 14.5667 4.0625 14.8 4.0375C15.0333 4.0125 15.2667 4 15.5 4C16.6 4 17.5417 4.39167 18.325 5.175C19.1083 5.95833 19.5 6.9 19.5 8ZM3.5 18H15.5V17.2C15.5 17.0167 15.4542 16.85 15.3625 16.7C15.2708 16.55 15.15 16.4333 15 16.35C14.1 15.9 13.1917 15.5625 12.275 15.3375C11.3583 15.1125 10.4333 15 9.5 15C8.56667 15 7.64167 15.1125 6.725 15.3375C5.80833 15.5625 4.9 15.9 4 16.35C3.85 16.4333 3.72917 16.55 3.6375 16.7C3.54583 16.85 3.5 17.0167 3.5 17.2V18ZM9.5 10C10.05 10 10.5208 9.80417 10.9125 9.4125C11.3042 9.02083 11.5 8.55 11.5 8C11.5 7.45 11.3042 6.97917 10.9125 6.5875C10.5208 6.19583 10.05 6 9.5 6C8.95 6 8.47917 6.19583 8.0875 6.5875C7.69583 6.97917 7.5 7.45 7.5 8C7.5 8.55 7.69583 9.02083 8.0875 9.4125C8.47917 9.80417 8.95 10 9.5 10Z"
                    fill="#969697"
                    fill-opacity="0.4"
                  />
                </Svg>
              );
            }}
            title="Territory Partner"
            value="Sarthak Umak"
            subtitle="Nagpur"
          />
          <InfoRow
            icon={() => {
              return (
                <Svg width="19" height="20" viewBox="0 0 19 20" fill="none">
                  <Path
                    d="M2.5 20C1.95 20 1.47917 19.8042 1.0875 19.4125C0.695833 19.0208 0.5 18.55 0.5 18V4C0.5 3.45 0.695833 2.97917 1.0875 2.5875C1.47917 2.19583 1.95 2 2.5 2H3.5V0H5.5V2H13.5V0H15.5V2H16.5C17.05 2 17.5208 2.19583 17.9125 2.5875C18.3042 2.97917 18.5 3.45 18.5 4V18C18.5 18.55 18.3042 19.0208 17.9125 19.4125C17.5208 19.8042 17.05 20 16.5 20H2.5ZM2.5 18H16.5V8H2.5V18ZM2.5 6H16.5V4H2.5V6ZM9.5 12C9.21667 12 8.97917 11.9042 8.7875 11.7125C8.59583 11.5208 8.5 11.2833 8.5 11C8.5 10.7167 8.59583 10.4792 8.7875 10.2875C8.97917 10.0958 9.21667 10 9.5 10C9.78333 10 10.0208 10.0958 10.2125 10.2875C10.4042 10.4792 10.5 10.7167 10.5 11C10.5 11.2833 10.4042 11.5208 10.2125 11.7125C10.0208 11.9042 9.78333 12 9.5 12ZM5.5 12C5.21667 12 4.97917 11.9042 4.7875 11.7125C4.59583 11.5208 4.5 11.2833 4.5 11C4.5 10.7167 4.59583 10.4792 4.7875 10.2875C4.97917 10.0958 5.21667 10 5.5 10C5.78333 10 6.02083 10.0958 6.2125 10.2875C6.40417 10.4792 6.5 10.7167 6.5 11C6.5 11.2833 6.40417 11.5208 6.2125 11.7125C6.02083 11.9042 5.78333 12 5.5 12ZM13.5 12C13.2167 12 12.9792 11.9042 12.7875 11.7125C12.5958 11.5208 12.5 11.2833 12.5 11C12.5 10.7167 12.5958 10.4792 12.7875 10.2875C12.9792 10.0958 13.2167 10 13.5 10C13.7833 10 14.0208 10.0958 14.2125 10.2875C14.4042 10.4792 14.5 10.7167 14.5 11C14.5 11.2833 14.4042 11.5208 14.2125 11.7125C14.0208 11.9042 13.7833 12 13.5 12ZM9.5 16C9.21667 16 8.97917 15.9042 8.7875 15.7125C8.59583 15.5208 8.5 15.2833 8.5 15C8.5 14.7167 8.59583 14.4792 8.7875 14.2875C8.97917 14.0958 9.21667 14 9.5 14C9.78333 14 10.0208 14.0958 10.2125 14.2875C10.4042 14.4792 10.5 14.7167 10.5 15C10.5 15.2833 10.4042 15.5208 10.2125 15.7125C10.0208 15.9042 9.78333 16 9.5 16ZM5.5 16C5.21667 16 4.97917 15.9042 4.7875 15.7125C4.59583 15.5208 4.5 15.2833 4.5 15C4.5 14.7167 4.59583 14.4792 4.7875 14.2875C4.97917 14.0958 5.21667 14 5.5 14C5.78333 14 6.02083 14.0958 6.2125 14.2875C6.40417 14.4792 6.5 14.7167 6.5 15C6.5 15.2833 6.40417 15.5208 6.2125 15.7125C6.02083 15.9042 5.78333 16 5.5 16ZM13.5 16C13.2167 16 12.9792 15.9042 12.7875 15.7125C12.5958 15.5208 12.5 15.2833 12.5 15C12.5 14.7167 12.5958 14.4792 12.7875 14.2875C12.9792 14.0958 13.2167 14 13.5 14C13.7833 14 14.0208 14.0958 14.2125 14.2875C14.4042 14.4792 14.5 14.7167 14.5 15C14.5 15.2833 14.4042 15.5208 14.2125 15.7125C14.0208 15.9042 13.7833 16 13.5 16Z"
                    fill="#969697"
                  />
                </Svg>
              );
            }}
            title="Date"
            value="Friday, April 4, 2025"
            subtitle="Nagpur"
          />
          <InfoRow
            icon={() => {
              return (
                <Svg width="21" height="20" viewBox="0 0 21 20" fill="none">
                  <Path
                    d="M13.8 14.7L15.2 13.3L11.5 9.6V5H9.5V10.4L13.8 14.7ZM10.5 20C9.11667 20 7.81667 19.7375 6.6 19.2125C5.38333 18.6875 4.325 17.975 3.425 17.075C2.525 16.175 1.8125 15.1167 1.2875 13.9C0.7625 12.6833 0.5 11.3833 0.5 10C0.5 8.61667 0.7625 7.31667 1.2875 6.1C1.8125 4.88333 2.525 3.825 3.425 2.925C4.325 2.025 5.38333 1.3125 6.6 0.7875C7.81667 0.2625 9.11667 0 10.5 0C11.8833 0 13.1833 0.2625 14.4 0.7875C15.6167 1.3125 16.675 2.025 17.575 2.925C18.475 3.825 19.1875 4.88333 19.7125 6.1C20.2375 7.31667 20.5 8.61667 20.5 10C20.5 11.3833 20.2375 12.6833 19.7125 13.9C19.1875 15.1167 18.475 16.175 17.575 17.075C16.675 17.975 15.6167 18.6875 14.4 19.2125C13.1833 19.7375 11.8833 20 10.5 20ZM10.5 18C12.7167 18 14.6042 17.2208 16.1625 15.6625C17.7208 14.1042 18.5 12.2167 18.5 10C18.5 7.78333 17.7208 5.89583 16.1625 4.3375C14.6042 2.77917 12.7167 2 10.5 2C8.28333 2 6.39583 2.77917 4.8375 4.3375C3.27917 5.89583 2.5 7.78333 2.5 10C2.5 12.2167 3.27917 14.1042 4.8375 15.6625C6.39583 17.2208 8.28333 18 10.5 18Z"
                    fill="#969697"
                  />
                </Svg>
              );
            }}
            title="Time"
            value="1:00 PM"
          />
          <InfoRow
            icon={() => {
              return (
                <Svg width="17" height="20" viewBox="0 0 17 20" fill="none">
                  <Path
                    d="M8.5 10C9.05 10 9.52083 9.80417 9.9125 9.4125C10.3042 9.02083 10.5 8.55 10.5 8C10.5 7.45 10.3042 6.97917 9.9125 6.5875C9.52083 6.19583 9.05 6 8.5 6C7.95 6 7.47917 6.19583 7.0875 6.5875C6.69583 6.97917 6.5 7.45 6.5 8C6.5 8.55 6.69583 9.02083 7.0875 9.4125C7.47917 9.80417 7.95 10 8.5 10ZM8.5 17.35C10.5333 15.4833 12.0417 13.7875 13.025 12.2625C14.0083 10.7375 14.5 9.38333 14.5 8.2C14.5 6.38333 13.9208 4.89583 12.7625 3.7375C11.6042 2.57917 10.1833 2 8.5 2C6.81667 2 5.39583 2.57917 4.2375 3.7375C3.07917 4.89583 2.5 6.38333 2.5 8.2C2.5 9.38333 2.99167 10.7375 3.975 12.2625C4.95833 13.7875 6.46667 15.4833 8.5 17.35ZM8.5 20C5.81667 17.7167 3.8125 15.5958 2.4875 13.6375C1.1625 11.6792 0.5 9.86667 0.5 8.2C0.5 5.7 1.30417 3.70833 2.9125 2.225C4.52083 0.741667 6.38333 0 8.5 0C10.6167 0 12.4792 0.741667 14.0875 2.225C15.6958 3.70833 16.5 5.7 16.5 8.2C16.5 9.86667 15.8375 11.6792 14.5125 13.6375C13.1875 15.5958 11.1833 17.7167 8.5 20Z"
                    fill="#969697"
                  />
                </Svg>
              );
            }}
            title="Location"
            value="Project Name, Address"
          />
        </View>

        {/* Info Message */}
        <View style={styles.footerNote}>
          <Text style={styles.noteText}>
            Note: After confirmation, you’ll be able to proceed with closing the
            deal. Both you and the Territory Partner will receive a calendar
            invitation.
          </Text>
        </View>
      </View>

      <TouchableOpacity
        style={styles.selectPartnerButton}
        onPress={() => {
          navigation.navigate('SuccessScreen');
        }}>
        <Text style={styles.selectPartnerText}>Confirm</Text>
      </TouchableOpacity>
    </View>
  );
};

//Info Row Component
const InfoRow = ({icon: Icon, title, value, subtitle}: any) => (
  <View style={styles.row}>
    <View style={styles.iconCircleSmall}>
      <Icon />
    </View>
    <View style={styles.textColumn}>
      <Text style={styles.title}>{title}</Text>
      <Text style={styles.value}>{value}</Text>
      {subtitle && <Text style={styles.subtitle}>{subtitle}</Text>}
    </View>
  </View>
);

const styles = StyleSheet.create({
  cardContainer: {
    justifyContent: 'center',
    margin: 'auto',
    alignSelf: 'center',
    width: '100%',
    backgroundColor: 'white',
    borderRadius: 12,
    padding: 16,
    gap: 16,
    alignItems: 'center',
  },
  header: {
    flexDirection: 'row',
    alignItems: 'center',
    gap: 11,
    marginInline: 'auto',
  },
  iconCircle: {
    width: 24,
    height: 24,
    backgroundColor: '#FFFFFF',
    borderRadius: 50,
    justifyContent: 'center',
    alignItems: 'center',
  },
  headerText: {
    fontSize: 20,
    fontWeight: '600',
    color: '#000',
  },
  infoBlock: {
    gap: 16,
    left: 15,
  },
  row: {
    flexDirection: 'row',
    alignItems: 'flex-start',
    gap: 12,
  },
  iconCircleSmall: {
    width: 36,
    height: 36,
    backgroundColor: '#FAFAFB',
    borderRadius: 18,
    justifyContent: 'center',
    alignItems: 'center',
  },
  textColumn: {
    flexDirection: 'column',
    gap: 4,
    width: 200,
  },
  title: {
    fontSize: 14,
    fontWeight: '600',
    color: '#000',
  },
  value: {
    fontSize: 14,
    fontWeight: '400',
    color: '#000',
  },
  subtitle: {
    fontSize: 12,
    fontWeight: '400',
    color: 'rgba(0,0,0,0.4)',
  },
  footerNote: {
    backgroundColor: '#E8F9F1',
    padding: 12,
    borderRadius: 8,
    marginTop: 12,
  },
  noteText: {
    fontSize: 12,
    fontWeight: '600',
    color: '#076300',
  },
  selectPartnerButton: {
    margin: 10,
    width: '95%',
    height: 45,
    marginInline: 'auto',
    backgroundColor: '#0BB501',
    borderRadius: 4,
    flexDirection: 'row',
    justifyContent: 'center',
    alignItems: 'center',
    paddingVertical: 6,
    paddingHorizontal: 12,
    gap: 10,
  },
  selectPartnerText: {
    fontFamily: 'Inter',
    fontStyle: 'normal',
    fontWeight: '600',
    fontSize: 16,
    lineHeight: 26, // 160% of 16px
    color: '#FFFFFF',
    textAlign: 'center',
  },
});

export default ConfirmMeetingCard;
